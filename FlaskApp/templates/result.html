{% extends "base.html" %}

{% block title %}Notification Sent{% endblock %}

{% block content %}
    <div class="container">
        <h1>Notification Sent</h1>
        <hr><br>
        <p>
            <strong>Registration Token:</strong>
            <button class="copy-button" onclick="copyToClipboard()">Copy</button>  <br><br>
            <span style="white-space: pre-wrap; word-wrap: break-word;"
                class="highlight" id="registrationToken">{{ registration_id }}</span>
        </p> <br><br>
        <p><strong>Title:</strong> <span class="highlight">{{ message_title }}</span></p>
        <p><strong>Body:</strong> <span class="highlight">{{ message_desc }}</span></p>
        {% if image %}
        <p><strong>Image URL:</strong> <span class="highlight">{{ image }}</span></p>
        {% endif %}
        <h3 align="right">Response from FCM:</h3>
        <pre>{{ response | tojson(indent=2) }}</pre>
    </div>

    <script>
        function copyToClipboard() {
            var token = document.getElementById("registrationToken").innerText;
            navigator.clipboard.writeText(token).then(function() {
                alert("Registration Token copied to clipboard!");
            }, function(err) {
                alert("Failed to copy Registration Token: " + err);
            });
        }
    </script>
{% endblock %}
