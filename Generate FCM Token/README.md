# `Generate FCM Token`

      Is fcm token once created for a device is permanent or is it changes?

<mat-icon _ngcontent-ng-c1677654="" role="img" fontset="google-material-icons" aria-label="Gemini in Firebase logo" class="mat-icon notranslate google-material-icons mat-icon-no-color" aria-hidden="true" data-mat-icon-type="font" data-mat-icon-namespace="google-material-icons">
</mat-icon></helios-agent-avatar><!----><!----></div><!----><div _ngcontent-ng-c3984265009="" class="helios-response ng-star-inserted"><fire-helios-c-mark-node _ngcontent-ng-c3984265009=""><fire-helios-c-mark-node class="ng-star-inserted"><!----><!----><!----><!----><!----><p class="ng-star-inserted"><fire-helios-c-mark-node class="ng-star-inserted"><!----><!----><!----><!----><!----><!----> That's a great question!  FCM tokens are  <!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----></fire-helios-c-mark-node><fire-helios-c-mark-node class="ng-star-inserted"><!----><!----><!----><!----><!----><!----><!----><!----><!----><strong class="ng-star-inserted"><fire-helios-c-mark-node class="ng-star-inserted"><!----><!----><!----><!----><!----><!----> not <!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----></fire-helios-c-mark-node><!----></strong><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----></fire-helios-c-mark-node><fire-helios-c-mark-node class="ng-star-inserted"><!----><!----><!----><!----><!----><!---->  permanent. They can change for a few reasons: <!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----></fire-helios-c-mark-node><!----></p><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----></fire-helios-c-mark-node><fire-helios-c-mark-node class="ng-star-inserted"><!----><ul class="ng-star-inserted"><li class="ng-star-inserted"><fire-helios-c-mark-node><!----><!----><fire-helios-c-mark-node class="ng-star-inserted"><!----><!----><!----><!----><!----><p class="ng-star-inserted"><fire-helios-c-mark-node class="ng-star-inserted"><!----><!----><!----><!----><!----><!----><!----><!----><!----><strong class="ng-star-inserted"><fire-helios-c-mark-node class="ng-star-inserted"><!----><!----><!----><!----><!----><!----> App Updates: <!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----></fire-helios-c-mark-node><!----></strong><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----></fire-helios-c-mark-node><fire-helios-c-mark-node class="ng-star-inserted"><!----><!----><!----><!----><!----><!---->  If your app is updated, the token might change. This is because the update might involve changes to the app's package name or other identifiers that are used to generate the token. <!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----></fire-helios-c-mark-node><!----></p><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----></fire-helios-c-mark-node><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----></fire-helios-c-mark-node></li><li class="ng-star-inserted"><fire-helios-c-mark-node><!----><!----><fire-helios-c-mark-node class="ng-star-inserted"><!----><!----><!----><!----><!----><p class="ng-star-inserted"><fire-helios-c-mark-node class="ng-star-inserted"><!----><!----><!----><!----><!----><!----><!----><!----><!----><strong class="ng-star-inserted"><fire-helios-c-mark-node class="ng-star-inserted"><!----><!----><!----><!----><!----><!----> Device Reset: <!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----></fire-helios-c-mark-node><!----></strong><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----></fire-helios-c-mark-node><fire-helios-c-mark-node class="ng-star-inserted"><!----><!----><!----><!----><!----><!---->  If the user resets their device, the token will definitely change. This is because the device's unique identifiers are reset during a factory reset. <!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----></fire-helios-c-mark-node><!----></p><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----></fire-helios-c-mark-node><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----></fire-helios-c-mark-node></li><li class="ng-star-inserted"><fire-helios-c-mark-node><!----><!----><fire-helios-c-mark-node class="ng-star-inserted"><!----><!----><!----><!----><!----><p class="ng-star-inserted"><fire-helios-c-mark-node class="ng-star-inserted"><!----><!----><!----><!----><!----><!----><!----><!----><!----><strong class="ng-star-inserted"><fire-helios-c-mark-node class="ng-star-inserted"><!----><!----><!----><!----><!----><!----> App Data Cleared: <!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----></fire-helios-c-mark-node><!----></strong><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----></fire-helios-c-mark-node><fire-helios-c-mark-node class="ng-star-inserted"><!----><!----><!----><!----><!----><!---->  If the user clears the app data, the token will also change. This is because the app's data, including the token, is deleted when the app data is cleared. <!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----></fire-helios-c-mark-node><!----></p><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----></fire-helios-c-mark-node><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----></fire-helios-c-mark-node></li><li class="ng-star-inserted"><fire-helios-c-mark-node><!----><!----><fire-helios-c-mark-node class="ng-star-inserted"><!----><!----><!----><!----><!----><p class="ng-star-inserted"><fire-helios-c-mark-node class="ng-star-inserted"><!----><!----><!----><!----><!----><!----><!----><!----><!----><strong class="ng-star-inserted"><fire-helios-c-mark-node class="ng-star-inserted"><!----><!----><!----><!----><!----><!----> Token Rotation: <!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----></fire-helios-c-mark-node><!----></strong><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----></fire-helios-c-mark-node><fire-helios-c-mark-node class="ng-star-inserted"><!----><!----><!----><!----><!----><!---->   FCM might rotate tokens periodically to improve security and privacy. This is a less common occurrence, but it's something to be aware of. <!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----></fire-helios-c-mark-node><!----></p><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----></fire-helios-c-mark-node><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----></fire-helios-c-mark-node></li><!----></ul><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----></fire-helios-c-mark-node><fire-helios-c-mark-node class="ng-star-inserted"><!----><!----><!----><!----><!----><p class="ng-star-inserted"><fire-helios-c-mark-node class="ng-star-inserted"><!----><!----><!----><!----><!----><!----><!----><!----><!----><strong class="ng-star-inserted"><fire-helios-c-mark-node class="ng-star-inserted"><!----><!----><!----><!----><!----><!----> So, how do you handle these changes? <!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----></fire-helios-c-mark-node><!----></strong><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----></fire-helios-c-mark-node><!----></p><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----></fire-helios-c-mark-node><fire-helios-c-mark-node class="ng-star-inserted"><!----><!----><!----><!----><!----><p class="ng-star-inserted"><fire-helios-c-mark-node class="ng-star-inserted"><!----><!----><!----><!----><!----><!----> The key is to  <!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----></fire-helios-c-mark-node><fire-helios-c-mark-node class="ng-star-inserted"><!----><!----><!----><!----><!----><!----><!----><!----><!----><strong class="ng-star-inserted"><fire-helios-c-mark-node class="ng-star-inserted"><!----><!----><!----><!----><!----><!----> listen for token refresh events <!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----></fire-helios-c-mark-node><!----></strong><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----></fire-helios-c-mark-node><fire-helios-c-mark-node class="ng-star-inserted"><!----><!----><!----><!----><!----><!----> .  Both Android and iOS platforms provide ways to register a callback that will be triggered whenever the token changes.  When this happens, you should: <!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----></fire-helios-c-mark-node><!----></p><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----></fire-helios-c-mark-node><fire-helios-c-mark-node class="ng-star-inserted"><!----><!----><ol class="ng-star-inserted"><li class="ng-star-inserted"><fire-helios-c-mark-node><!----><!----><fire-helios-c-mark-node class="ng-star-inserted"><!----><!----><!----><!----><!----><p class="ng-star-inserted"><fire-helios-c-mark-node class="ng-star-inserted"><!----><!----><!----><!----><!----><!----><!----><!----><!----><strong class="ng-star-inserted"><fire-helios-c-mark-node class="ng-star-inserted"><!----><!----><!----><!----><!----><!----> Get the new token: <!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----></fire-helios-c-mark-node><!----></strong><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----></fire-helios-c-mark-node><fire-helios-c-mark-node class="ng-star-inserted"><!----><!----><!----><!----><!----><!---->   Retrieve the updated token from the FCM library. <!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----></fire-helios-c-mark-node><!----></p><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----></fire-helios-c-mark-node><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----></fire-helios-c-mark-node></li><li class="ng-star-inserted"><fire-helios-c-mark-node><!----><!----><fire-helios-c-mark-node class="ng-star-inserted"><!----><!----><!----><!----><!----><p class="ng-star-inserted"><fire-helios-c-mark-node class="ng-star-inserted"><!----><!----><!----><!----><!----><!----><!----><!----><!----><strong class="ng-star-inserted"><fire-helios-c-mark-node class="ng-star-inserted"><!----><!----><!----><!----><!----><!----> Update your server: <!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----></fire-helios-c-mark-node><!----></strong><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----></fire-helios-c-mark-node><fire-helios-c-mark-node class="ng-star-inserted"><!----><!----><!----><!----><!----><!---->   Send the new token to your server so that you can continue to send messages to the device. <!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----></fire-helios-c-mark-node><!----></p><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----></fire-helios-c-mark-node><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----></fire-helios-c-mark-node></li><li class="ng-star-inserted"><fire-helios-c-mark-node><!----><!----><fire-helios-c-mark-node class="ng-star-inserted"><!----><!----><!----><!----><!----><p class="ng-star-inserted"><fire-helios-c-mark-node class="ng-star-inserted"><!----><!----><!----><!----><!----><!----><!----><!----><!----><strong class="ng-star-inserted"><fire-helios-c-mark-node class="ng-star-inserted"><!----><!----><!----><!----><!----><!----> Store the new token: <!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----></fire-helios-c-mark-node><!----></strong><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----></fire-helios-c-mark-node><fire-helios-c-mark-node class="ng-star-inserted"><!----><!----><!----><!----><!----><!---->   Update your local storage with the new token. <!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----></fire-helios-c-mark-node><!----></p><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----></fire-helios-c-mark-node><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----></fire-helios-c-mark-node></li><!----></ol><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----></fire-helios-c-mark-node><fire-helios-c-mark-node class="ng-star-inserted"><!----><!----><!----><!----><!----><p class="ng-star-inserted"><fire-helios-c-mark-node class="ng-star-inserted"><!----><!----><!----><!----><!----><!----> By following these steps, you can ensure that your app can always send messages to the correct device, even if the token changes. <!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----></fire-helios-c-mark-node><!----></p><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----></fire-helios-c-mark-node><fire-helios-c-mark-node class="ng-star-inserted"><!----><!----><!----><!----><!----><p class="ng-star-inserted"><fire-helios-c-mark-node class="ng-star-inserted"><!----><!----><!----><!----><!----><!----> <!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----></fire-helios-c-mark-node><!----></p><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----></fire-helios-c-mark-node><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----></fire-helios-c-mark-node></div><!----><!----></div>

---

To obtain the service account JSON file required for `service_account.Credentials.from_service_account_file`, you need to create a service account in your Firebase project and download the key. Here are the steps to do so:

![image](https://github.com/user-attachments/assets/94caac48-3947-42ef-9696-80d5a0974201)

### Steps to Create a Service Account and Download the JSON Key

1. **Go to the Firebase Console**:
   - Open the [Firebase Console](https://console.firebase.google.com/u/0/project/fir-push-notification-85613/settings/serviceaccounts/adminsdk).
   - Select your project (e.g., `fir-push-notification-85613`).

2. **Navigate to Project Settings**:
   - Click on the gear icon next to "Project Overview" and select "Project settings".

3. **Service Accounts**:
   - In the settings page, click on the "Service accounts" tab.
   - Click on the "Generate new private key" button.
   - A JSON file will be automatically downloaded to your computer. This is your service account key.

4. **Store the JSON Key Securely**:
   - Save this JSON file in a secure location on your server or development machine. The file contains sensitive information that should not be exposed publicly.
